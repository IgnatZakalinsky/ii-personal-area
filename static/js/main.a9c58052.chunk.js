(this["webpackJsonpii-personal-area"]=this["webpackJsonpii-personal-area"]||[]).push([[0],{113:function(e,t,n){e.exports={button:"PlaylistPage_button__3da6I"}},116:function(e,t,n){e.exports={LoginPage:"LoginPage_LoginPage__LrBOi"}},120:function(e,t,n){e.exports={base:"CustomSpin_base__2qa5N"}},138:function(e,t,n){e.exports=n(221)},143:function(e,t,n){},144:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),i=n.n(o),c=(n(143),n(144),n(145),n(47)),s=n(52),l=n(20),u=n(23),d=n.n(u),p=n(33),m=n(36),f=n(34),b=n(112),g=n.n(b).a.create({baseURL:"https://personal-area-it-incubator.herokuapp.com/1.0/",withCredentials:!0}),h=function(){return g.get("playlists").then((function(e){return e.data}))},y=function(e){return g.post("playlists2",e).then((function(e){return e.data}))},v=function(e){return g.delete("playlists/"+e).then((function(e){return e.data}))},E=function(e){return g.put("playlists",{playlist:{_id:e,name:"new Pl"}}).then((function(e){return e.data}))},L=Object(f.b)("app/someThunk",function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,n){t.x<10&&e({z:t.x}),n({z:t.x})}));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),console.log("er",Object(p.a)({},e.t0),e.t0),e.abrupt("return",n.rejectWithValue({y:t.x}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(f.c)({name:"app",initialState:{x:1,y:2,z:3,isLoading:!1},reducers:{setX:function(e,t){e.x=t.payload.x},setLoading:function(e,t){e.isLoading=t.payload.isLoading}},extraReducers:function(e){e.addCase(L.fulfilled,(function(e,t){e.z=t.payload.z}))}}),k=O.reducer,j=O.actions,w=(L.rejected,function(e){return e.app}),x=Object(f.b)("playlists/getPlaylists",function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(j.setLoading({isLoading:!0})),e.prev=1,e.next=4,h();case 4:return a=e.sent,n.dispatch(j.setLoading({isLoading:!1})),e.abrupt("return",{playlists:a.playlists});case 9:return e.prev=9,e.t0=e.catch(1),console.log("er",Object(p.a)({},e.t0),e.t0),n.dispatch(j.setLoading({isLoading:!1})),e.abrupt("return",n.rejectWithValue({error:Object(p.a)({},e.t0)}));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(f.b)("playlists/addPlaylist",function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(j.setLoading({isLoading:!0})),e.prev=1,e.next=4,y(void 0);case 4:return e.abrupt("return");case 7:return e.prev=7,e.t0=e.catch(1),a=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",console.log("Nya, playlists Error!",Object(p.a)({},e.t0)),console.log("error: ",a),n.dispatch(j.setLoading({isLoading:!1})),e.abrupt("return",n.rejectWithValue({error:a}));case 14:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(f.b)("playlists/deletePlaylist",function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(j.setLoading({isLoading:!0})),e.prev=1,e.next=4,v(t.id);case 4:return n.dispatch(x({})),e.abrupt("return");case 8:return e.prev=8,e.t0=e.catch(1),a=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",console.log("Nya, playlists Error!",Object(p.a)({},e.t0)),console.log("error: ",a),n.dispatch(j.setLoading({isLoading:!1})),e.abrupt("return",n.rejectWithValue({error:a}));case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),N=Object(f.b)("playlists/updatePlaylist",function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(j.setLoading({isLoading:!0})),e.prev=1,e.next=4,E(t.id);case 4:return n.dispatch(x({})),e.abrupt("return");case 8:return e.prev=8,e.t0=e.catch(1),a=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",console.log("Nya, playlists Error!",Object(p.a)({},e.t0)),console.log("error: ",a),n.dispatch(j.setLoading({isLoading:!1})),e.abrupt("return",n.rejectWithValue({error:a}));case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(f.c)({name:"playlists",initialState:{playlists:[]},reducers:{},extraReducers:function(e){e.addCase(x.fulfilled,(function(e,t){e.playlists=t.payload.playlists}))}}),T=S.reducer,I=(S.actions,{getPlaylists:x,addPlaylist:P,deletePlaylist:_,updatePlaylist:N}),F=function(e){return e.playlists},C=n(30),z=function(e){var t=Object(c.b)();return Object(a.useMemo)((function(){return Object(C.b)(e,t)}),[e,t])},R=n(113),W=n.n(R),B=n(64),G=function(){var e=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(new Date).getTime(),console.log("time: ",(new Date).getTime()-t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(c.c)(F).playlists,t=Object(c.c)(w).isLoading,n=z(I),a=(n.getPlaylists,n.addPlaylist),o=n.deletePlaylist,i=n.updatePlaylist,s=e.map((function(e){var n=e.tags.map((function(e){return r.a.createElement("span",{key:e},e,",")}));return r.a.createElement("div",{key:e._id},r.a.createElement("div",{style:{display:"inline-block",width:100}},e.name),r.a.createElement("div",{style:{display:"inline-block",width:100}},e.levelAccess),r.a.createElement("div",{style:{display:"inline-block",width:100}},new Date(e.updated).toLocaleDateString()),r.a.createElement("div",{style:{display:"inline-block",width:100}},"[",n,"]"),r.a.createElement(B.a,{className:W.a.button,disabled:t,onClick:function(){return o({id:e._id})}},"X"),r.a.createElement("button",{disabled:t,onClick:function(){return i({id:e._id})}},"+++"))}));return r.a.createElement("div",null,r.a.createElement("button",{onClick:G},"test add"),"pl",r.a.createElement("button",{disabled:t,onClick:a},"add"),r.a.createElement("div",null,s))},A=n(116),D=n.n(A),M=n(73),q=n(227),J=n(82),U=n.n(J),X=n(228),Y=n(226),$=r.a.memo((function(e){var t=e.token,n=e.setToken,a=e.sendToken,o=e.loading;return r.a.createElement("div",{className:U.a.LoginForm},"Login",r.a.createElement("div",{className:U.a.form},r.a.createElement(Y.a,{prefix:"t: ",placeholder:"* please input token",value:t,autoFocus:!0,maxLength:36,onChange:function(e){return n(e.currentTarget.value)},onPressEnter:a,suffix:r.a.createElement(X.a,{onClick:a})}),r.a.createElement(B.a,{className:U.a.loginButton,loading:o,onClick:a},"Login")))})),H={login:function(){var e=Object(m.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/login",{token:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},K=Object(f.b)("login/sendTokenThunk",function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.dispatch(ee.setLoading({isLoading:!0})),e.prev=1,e.next=4,H.login(t.token);case 4:return a=e.sent,n.dispatch(K.fulfilled({error:a.error},"xzId1",{token:t.token})),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),r=e.t0.response?e.t0.response.data.error:e.t0.message+", more details in the console",n.dispatch(K.fulfilled({error:r},"xzId1",{token:t.token})),console.log("er",Object(p.a)({},e.t0),e.t0),e.abrupt("return",n.rejectWithValue({token:t.token}));case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),Q=Object(f.c)({name:"login",initialState:{isLoading:!1,isSuccess:!1,error:""},reducers:{clear:function(e,t){e.isLoading=!1,e.isSuccess=!1,e.error=""},setLoading:function(e,t){e.isLoading=t.payload.isLoading}},extraReducers:function(e){e.addCase(K.fulfilled,(function(e,t){e.isSuccess=!t.payload.error,e.error=t.payload.error||"",e.isLoading=!1}))}}),Z=Q.reducer,ee=Q.actions,te={sendTokenThunk:K},ne=function(e){return e.login},ae=n(136),re=n(120),oe=n.n(re),ie=n(223),ce=r.a.memo((function(e){var t=e.size,n=void 0===t?"large":t,a=e.className,o=Object(ae.a)(e,["size","className"]);return r.a.createElement("div",{className:a||oe.a.base},r.a.createElement(ie.a,Object.assign({size:n},o)))})),se=r.a.memo((function(){var e=Object(l.g)().token,t=Object(a.useState)(e),n=Object(M.a)(t,2),o=n[0],i=n[1],s=Object(c.c)(ne),u=s.isLoading,d=s.error,m=s.isSuccess,f=Object(a.useState)(!0),b=Object(M.a)(f,2),g=b[0],h=b[1],y=Object(a.useState)(!1),v=Object(M.a)(y,2),E=v[0],L=v[1],O=Object(a.useState)(!!e),k=Object(M.a)(O,2),j=k[0],w=k[1],x=z(Object(p.a)({},ee,{},te)),P=x.sendTokenThunk,_=x.clear,N=Object(a.useCallback)((function(){u||m||!o?!o&&!g&&q.b.error("no token"):P({token:o})}),[u,m,P,o,g]);return Object(a.useEffect)((function(){g?(_({}),N(),h(!1)):(m&&!E&&(q.b.success("ok!",1),setTimeout((function(){return L(!0)}),500)),d&&(j?w(!1):(q.b.error(d),_({}))))}),[g,h,m,d,e,N,j,_,E]),E?r.a.createElement(l.a,{to:ue.PROFILE}):j?r.a.createElement(ce,null):r.a.createElement(r.a.Fragment,null,r.a.createElement($,{loading:u,token:o,setToken:i,sendToken:N}))})),le=r.a.memo((function(){return r.a.createElement("div",{className:D.a.LoginPage},r.a.createElement(se,null))})),ue={LOGIN:"/login",PROFILE:"/profile",PLAYLISTS:"/playlists"},de=function(){return r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/",exact:!0,render:function(){return r.a.createElement(l.a,{to:ue.LOGIN})}}),r.a.createElement(l.b,{path:ue.LOGIN+"/:token",render:function(){return r.a.createElement(le,null)}}),r.a.createElement(l.b,{path:ue.LOGIN,render:function(){return r.a.createElement(le,null)}}),r.a.createElement(l.b,{path:ue.PROFILE,render:function(){return r.a.createElement("div",null,"profile")}}),r.a.createElement(l.b,{path:ue.PLAYLISTS,render:function(){return r.a.createElement(V,null)}}),r.a.createElement(l.b,{render:function(){return r.a.createElement("div",null,"404")}}))},pe=n(225),me=n(224),fe=r.a.memo((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{title:r.a.createElement(r.a.Fragment,null,"Personal Area"),subTitle:r.a.createElement("a",{href:"https://it-incubator.by/",rel:"noopener noreferrer",target:"_blank"},"it-incubator"),extra:[r.a.createElement(s.b,{to:ue.LOGIN,key:ue.LOGIN},"login"),r.a.createElement(s.b,{to:ue.PROFILE,key:ue.PROFILE},"profile")]}),r.a.createElement(me.a,null))})),be=function(){return r.a.createElement("div",null,r.a.createElement(fe,null),r.a.createElement(de,null))},ge=n(66),he=Object(C.c)({app:k,login:Z,playlists:T}),ye=Object(f.a)({reducer:he,middleware:function(e){return e().prepend(ge.a)}}),ve=ye;window.store=ye;var Ee=function(){return r.a.createElement(s.a,null,r.a.createElement(c.a,{store:ve},r.a.createElement("div",{className:"App"},r.a.createElement(be,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,n){e.exports={LoginForm:"LoginForm_LoginForm__2Uuqi",form:"LoginForm_form__1eLSk",loginButton:"LoginForm_loginButton__3Mt46"}}},[[138,1,2]]]);
//# sourceMappingURL=main.a9c58052.chunk.js.map